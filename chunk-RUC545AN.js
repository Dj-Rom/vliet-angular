import{a as H}from"./chunk-J3P7GPR3.js";import{d as z}from"./chunk-5SBTTGMY.js";import{a as q}from"./chunk-QZF37CAG.js";import{e as b}from"./chunk-5OT4C6C4.js";import{b as G,d as R,h as U,q as $}from"./chunk-LY3SBGMY.js";import{g as D}from"./chunk-NPRT3BWK.js";import{$a as o,Db as N,Ea as g,Ia as S,L as E,Na as v,Ua as k,V as p,Va as A,W as m,Xa as I,Ya as L,Za as _,_a as i,ab as x,eb as V,fb as T,gb as u,j as O,kb as w,mb as s,nb as F,qb as j,sa as P,sb as d,tb as y,ub as B,vb as h,wa as l,wb as C,xb as M}from"./chunk-GCAN2TPR.js";var f=class t{client$=new O(null);isOpen$=new O(!1);open(r){this.client$.next(r),this.isOpen$.next(!0),window.scrollTo({top:0,behavior:"smooth"}),document.body.style.overflow="hidden"}close(){this.isOpen$.next(!1),this.client$.next(null),document.body.style.overflow="auto"}static \u0275fac=function(e){return new(e||t)};static \u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})};function Z(t,r){t&1&&x(0,"div",3)}function ee(t,r){if(t&1){let e=u();i(0,"td")(1,"input",10),M("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.company,n)||(a.client.company=n),m(n)}),o()(),i(2,"td")(3,"input",11),M("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.address,n)||(a.client.address=n),m(n)}),o()(),i(4,"td")(5,"input",12),M("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.google_link,n)||(a.client.google_link=n),m(n)}),o()(),i(6,"td",6)(7,"input",13),M("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.gps,n)||(a.client.gps=n),m(n)}),o()(),i(8,"td")(9,"input",14),M("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.notes,n)||(a.client.notes=n),m(n)}),o()()}if(t&2){let e=s(3);l(),h("ngModel",e.client.company),l(2),h("ngModel",e.client.address),l(2),h("ngModel",e.client.google_link),l(2),h("ngModel",e.client.gps),l(2),h("ngModel",e.client.notes)}}function te(t,r){if(t&1&&(i(0,"td"),d(1),o()),t&2){let e=s(4);l(),y(e.client.notes)}}function ne(t,r){if(t&1&&(i(0,"td"),d(1),o(),i(2,"td"),d(3),o(),i(4,"td")(5,"a",15),d(6," Google link "),o()(),i(7,"td",6),d(8),o(),v(9,te,2,1,"td",16)),t&2){let e=s(3);l(),y(e.client.company),l(2),y(e.client.address),l(2),_("href",e.client.google_link,P),l(3),y(e.client.gps),l(),_("ngIf",e.isAuth())}}function ie(t,r){if(t&1){let e=u();i(0,"button",17),w("click",function(){p(e);let n=s(3);return m(n.save())}),d(1,"Save"),o()}}function oe(t,r){if(t&1){let e=u();V(0),i(1,"table")(2,"thead")(3,"tr")(4,"th"),d(5,"Company"),o(),i(6,"th"),d(7,"Address"),o(),i(8,"th"),d(9,"Google Link"),o(),i(10,"th",6),d(11,"GPS"),o(),i(12,"th"),d(13,"Note"),o()()(),i(14,"tbody")(15,"tr"),k(16,ee,10,5)(17,ne,10,5),o()()(),v(18,ie,2,0,"button",7),i(19,"div",8)(20,"button",9),w("click",function(){p(e);let n=s(2);return m(n.edit())}),d(21,"Edit"),o(),i(22,"button",9),w("click",function(){p(e);let n=s(2);return m(n.close())}),d(23,"Close"),o()(),T()}if(t&2){let e=s(2);l(16),A(e.isEdit?16:17),l(2),_("ngIf",e.isEdit)}}function re(t,r){t&1&&(i(0,"p"),d(1,"Loading client data..."),o())}function ae(t,r){if(t&1&&(i(0,"section",4),v(1,oe,24,2,"ng-container",5)(2,re,2,0,"ng-template",null,0,N),o()),t&2){let e=F(3),c=s();l(),_("ngIf",c.client)("ngIfElse",e)}}var W=class t{constructor(r,e,c,n){this.modalService=r;this.authService=e;this.fb=c;this.alertService=n;this.modalService.client$.subscribe(a=>this.client=a),this.modalService.isOpen$.subscribe(a=>this.isOpen=a)}client=null;isOpen=!1;isEdit=!1;isAuth(){return this.authService.getUser()!==null}edit(){this.isEdit=!this.isEdit}close(){this.modalService.close(),this.isEdit=!1}save(){this.isAuth()&&this.client&&this.fb.updateSharedAddress(this.client?.id,this.client).then(()=>{this.alertService.show("success","Client saved successfully!"),this.modalService.close(),this.isEdit=!1},r=>{console.error("Failed to update address:",r)})}static \u0275fac=function(e){return new(e||t)(g(f),g(H),g(b),g(q))};static \u0275cmp=S({type:t,selectors:[["app-modal-window"]],decls:2,vars:2,consts:[["loading",""],["class","backgroundForMobileModal",4,"ngIf"],["class","modal-window",4,"ngIf"],[1,"backgroundForMobileModal"],[1,"modal-window"],[4,"ngIf","ngIfElse"],[1,"note"],["class","btnSave btn",3,"click",4,"ngIf"],[1,"btns"],[1,"btn",3,"click"],["type","text","placeholder","Write company name",3,"ngModelChange","ngModel"],["type","text","placeholder","Write address",3,"ngModelChange","ngModel"],["type","text","placeholder","Write link for Google Maps",3,"ngModelChange","ngModel"],["type","text","placeholder","Write GPS for example: 22.222222, 22.222222",3,"ngModelChange","ngModel"],["type","text","placeholder","Write notes",3,"ngModelChange","ngModel"],["target","_blank","rel","noopener noreferrer",3,"href"],[4,"ngIf"],[1,"btnSave","btn",3,"click"]],template:function(e,c){e&1&&v(0,Z,1,0,"div",1)(1,ae,4,2,"section",2),e&2&&(_("ngIf",c.isOpen),l(),_("ngIf",c.isOpen))},dependencies:[D,$,G,R,U],styles:[".backgroundForMobileModal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000e6;z-index:1000}.modal-window[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);max-width:566px;width:90%;padding:1rem;background:var(--dark-color-b, #222);color:var(--text-secondary-color, #fff);border-radius:10px;display:flex;flex-direction:column;z-index:1001}@media screen and (max-width:640px){.modal-window[_ngcontent-%COMP%]{width:95%}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;gap:0;padding:0;margin:0;border:1px solid red}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:none}}"]})};var le=(t,r)=>r.id;function de(t,r){if(t&1){let e=u();i(0,"button",4),w("click",function(){let n=p(e).$implicit,a=s();return m(a.modalService.open(n))}),d(1),o()}if(t&2){let e=r.$implicit;_("id",e.id),l(),B(" ",e.company," ")}}var Q=class t{constructor(r,e){this.fb=r;this.modalService=e}listAddress=[];async ngOnInit(){try{this.listAddress=await this.fb.getSharedAddresses(),console.log("\u{1F4E6} Addresses loaded:",this.listAddress)}catch(r){console.error("Failed to load addresses:",r)}}ModalService=f;navigator=navigator;static \u0275fac=function(e){return new(e||t)(g(b),g(f))};static \u0275cmp=S({type:t,selectors:[["app-load-location"]],decls:10,vars:2,consts:[[1,"h3LoadLocation"],[1,"groupCompanyBtn"],[1,"btn","companySelectBtn",3,"id"],["routerLink","/app/add-new-address",1,"btnAddCompany"],[1,"btn","companySelectBtn",3,"click","id"]],template:function(e,c){e&1&&(x(0,"app-modal-window"),i(1,"h3",0),d(2,"Company:"),o(),x(3,"br"),i(4,"div",1),I(5,de,2,2,"button",2,le),o(),x(7,"br"),i(8,"button",3),d(9,"+"),o()),e&2&&(j("display: flex;justify-content: center;"),l(5),L(c.listAddress))},dependencies:[W,z],styles:["*[_ngcontent-%COMP%]{color:var(--ligth-color)}th[_ngcontent-%COMP%]{padding:2px 10px;border:2px solid var(--ligth-color)}.groupCompanyBtn[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.companySelectBtn[_ngcontent-%COMP%]{width:128px;height:80px;padding:10px 20px;border-radius:5px}.modalAddCompany[_ngcontent-%COMP%]{padding:2.5vw;margin-top:20px;display:flex;flex-direction:column;align-items:center;width:95vw;background:var(--gray-color);height:30vh;justify-content:center;align-content:center;flex-wrap:wrap}.modalAddCompany[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modalAddCompany[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:90vw}.modalAddCompany[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:10px 2.5vw;width:85vw}.btnAddCompany[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:30px;width:50px;height:50px;border-radius:50%;font-size:40px;padding:1px;background-color:green}@media screen and (max-width:640px){.h3LoadLocation[_ngcontent-%COMP%]{position:absolute;top:40px;margin-left:40px;width:40px}.companySelectBtn[_ngcontent-%COMP%]{width:90vw;margin-top:8px}.groupCompanyBtn[_ngcontent-%COMP%]{left:0;position:absolute;top:80px;display:flex;flex-wrap:wrap;justify-content:center}}"]})};export{Q as LoadLocation};
