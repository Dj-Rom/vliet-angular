import{a as J}from"./chunk-OZUSZWZZ.js";import{e as S}from"./chunk-3HWJ3ZKD.js";import{b as R,d as U,h as H,q as $}from"./chunk-HPGZ2Y7G.js";import{d as G}from"./chunk-2Y56YT2H.js";import{a as q}from"./chunk-PS23FTD2.js";import{g as N}from"./chunk-CI6ANZ2A.js";import{$a as f,Cb as D,Da as g,Ha as b,L as I,Ma as M,Ta as A,Ua as k,V as p,W as m,Wa as L,Xa as V,Ya as _,Za as i,_a as o,db as T,eb as F,fb as h,ga as E,j as P,jb as x,lb as s,mb as j,pb as B,rb as c,sa as W,sb as y,tb as z,ub as w,va as d,vb as C,wb as v}from"./chunk-B4AEFEQM.js";var u=class t{client$=new P(null);isOpen$=new P(!1);open(r){this.client$.next(r),this.isOpen$.next(!0),window.scrollTo({top:0,behavior:"smooth"}),document.body.style.overflow="hidden"}close(){this.isOpen$.next(!1),this.client$.next(null),document.body.style.overflow="auto"}static \u0275fac=function(e){return new(e||t)};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t,r){t&1&&f(0,"div",3)}function te(t,r){if(t&1){let e=h();i(0,"td")(1,"input",12),v("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.company,n)||(a.client.company=n),m(n)}),o()(),i(2,"td")(3,"input",13),v("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.address,n)||(a.client.address=n),m(n)}),o()(),i(4,"td")(5,"input",14),v("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.google_link,n)||(a.client.google_link=n),m(n)}),o()(),i(6,"td",7)(7,"input",15),v("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.gps,n)||(a.client.gps=n),m(n)}),o()(),i(8,"td")(9,"input",16),v("ngModelChange",function(n){p(e);let a=s(3);return C(a.client.notes,n)||(a.client.notes=n),m(n)}),o()()}if(t&2){let e=s(3);d(),w("ngModel",e.client.company),d(2),w("ngModel",e.client.address),d(2),w("ngModel",e.client.google_link),d(2),w("ngModel",e.client.gps),d(2),w("ngModel",e.client.notes)}}function ne(t,r){if(t&1&&(i(0,"td"),c(1),o()),t&2){let e=s(4);d(),y(e.client.notes)}}function ie(t,r){if(t&1&&(i(0,"td"),c(1),o(),i(2,"td"),c(3),o(),i(4,"td")(5,"a",17),c(6," Google link "),o()(),i(7,"td",7),c(8),o(),M(9,ne,2,1,"td",18)),t&2){let e=s(3);d(),y(e.client.company),d(2),y(e.client.address),d(2),_("href",e.client.google_link,W),d(3),y(e.client.gps),d(),_("ngIf",e.isAuth())}}function oe(t,r){if(t&1){let e=h();i(0,"button",19),x("click",function(){p(e);let n=s(3);return m(n.save())}),c(1,"Save"),o()}}function re(t,r){if(t&1){let e=h();T(0),i(1,"table")(2,"thead")(3,"tr",6)(4,"th"),c(5,"Company"),o(),i(6,"th"),c(7,"Address"),o(),i(8,"th"),c(9,"Google Link"),o(),i(10,"th",7),c(11,"GPS"),o(),i(12,"th"),c(13,"Note"),o()()(),i(14,"tbody")(15,"tr",6),A(16,te,10,5)(17,ie,10,5),o()()(),M(18,oe,2,0,"button",8),i(19,"div",9)(20,"button",10),x("click",function(){p(e);let n=s(2);return m(n.edit())}),c(21,"Edit"),o(),i(22,"button",11),x("click",function(){p(e);let n=s(2);return m(n.close())}),c(23,"Close"),o()(),F()}if(t&2){let e=s(2);d(16),k(e.isEdit?16:17),d(2),_("ngIf",e.isEdit)}}function ae(t,r){t&1&&(i(0,"p"),c(1,"Loading client data..."),o())}function le(t,r){if(t&1&&(i(0,"section",4),M(1,re,24,2,"ng-container",5)(2,ae,2,0,"ng-template",null,0,D),o()),t&2){let e=j(3),l=s();d(),_("ngIf",l.client)("ngIfElse",e)}}var O=class t{constructor(r,e,l,n){this.modalService=r;this.authService=e;this.fb=l;this.alertService=n;this.modalService.client$.subscribe(a=>this.client=a),this.modalService.isOpen$.subscribe(a=>this.isOpen=a)}client=null;isOpen=!1;isEdit=!1;isAuth(){return this.authService.getUser()!==null}edit(){this.isEdit=!this.isEdit}close(){this.modalService.close(),this.isEdit=!1}save(){this.isAuth()&&this.client&&this.fb.updateSharedAddress(this.client?.id,this.client).then(()=>{this.alertService.show("success","Client saved successfully!"),this.modalService.close(),this.isEdit=!1},r=>{console.error("Failed to update address:",r)})}static \u0275fac=function(e){return new(e||t)(g(u),g(J),g(S),g(q))};static \u0275cmp=b({type:t,selectors:[["app-modal-window"]],decls:2,vars:2,consts:[["loading",""],["class","backgroundForMobileModal",4,"ngIf"],["class","modal-window",4,"ngIf"],[1,"backgroundForMobileModal"],[1,"modal-window"],[4,"ngIf","ngIfElse"],[1,"font400size14"],[1,"note"],["class","btnSave btn",3,"click",4,"ngIf"],[1,"btns","mt16"],[1,"button","font400size14",3,"click"],[1,"button","font400size14","mt12",3,"click"],["type","text","placeholder","Write company name",3,"ngModelChange","ngModel"],["type","text","placeholder","Write address",3,"ngModelChange","ngModel"],["type","text","placeholder","Write link for Google Maps",3,"ngModelChange","ngModel"],["type","text","placeholder","Write GPS for example: 22.222222, 22.222222",3,"ngModelChange","ngModel"],["type","text","placeholder","Write notes",3,"ngModelChange","ngModel"],["target","_blank","rel","noopener noreferrer",3,"href"],[4,"ngIf"],[1,"btnSave","btn",3,"click"]],template:function(e,l){e&1&&M(0,ee,1,0,"div",1)(1,le,4,2,"section",2),e&2&&(_("ngIf",l.isOpen),d(),_("ngIf",l.isOpen))},dependencies:[N,$,R,U,H],styles:[".backgroundForMobileModal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000e6;z-index:1000}.modal-window[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);max-width:566px;width:90%;padding:1rem;background:var(--dark-color-b, #222);color:var(--text-secondary-color, #fff);border-radius:10px;display:flex;flex-direction:column;z-index:1001}@media screen and (max-width:640px){.modal-window[_ngcontent-%COMP%]{width:95%}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;gap:0;padding:0;margin:0;border:1px solid red}.modal-window[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:none}}"]})};var de=(t,r)=>r.id;function ce(t,r){if(t&1){let e=h();i(0,"button",8),x("click",function(){let n=p(e).$implicit,a=s();return m(a.modalService.open(n))}),c(1),o()}if(t&2){let e=r.$implicit;_("id",e.id),d(),z(" ",e.company," ")}}var X=class t{constructor(r,e){this.fb=r;this.modalService=e}listAddress=E([]);filteredListAddress=E([]);async ngOnInit(){try{this.listAddress.set(await this.fb.getSharedAddresses()),this.filteredListAddress.set(this.listAddress())}catch(r){console.error("Failed to load addresses:",r)}}ModalService=u;navigator=navigator;filterValue="";onFilterChange(r){let e=r.target;this.filterValue=e.value.toLowerCase(),this.filteredListAddress.set(this.listAddress().filter(l=>l.company.toLowerCase().includes(this.filterValue)))}static \u0275fac=function(e){return new(e||t)(g(S),g(u))};static \u0275cmp=b({type:t,selectors:[["app-load-location"]],decls:14,vars:3,consts:[[1,"h3LoadLocation","font600size16"],[1,"filterInput","mt12"],["src","assets/svg/load-calc-icons/filter.svg","alt","filter"],["type","text","placeholder","Search",1,"font400size16",3,"input","value"],["src","assets/svg/load-calc-icons/closeItem.svg","alt","close"],[1,"groupCompanyBtn"],[1,"btn","companySelectBtn","font400size16",3,"id"],["routerLink","/app/add-new-address",1,"btnAddCompany"],[1,"btn","companySelectBtn","font400size16",3,"click","id"]],template:function(e,l){e&1&&(f(0,"app-modal-window"),i(1,"h3",0),c(2,"Companies:"),o(),f(3,"br"),i(4,"div",1),f(5,"img",2),i(6,"input",3),x("input",function(a){return l.onFilterChange(a)}),o(),f(7,"img",4),o(),i(8,"div",5),L(9,ce,2,2,"button",6,de),o(),f(11,"br"),i(12,"button",7),c(13,"+"),o()),e&2&&(B("display: flex;justify-content: center;"),d(6),_("value",l.filterValue),d(3),V(l.filteredListAddress()))},dependencies:[O,G],styles:[".filterInput[_ngcontent-%COMP%]{display:flex;margin:62px auto 24px;justify-content:center;align-items:center;width:361px;height:44px;angle:0 deg;opacity:1;gap:6px;background:var(--bg-input);border-radius:4px}.filterInput[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.filterInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--text-primary);border:none;width:290px;height:24px;angle:0 deg;opacity:1;background:var(--bg-input)}.filterInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none!important}.filterInput[_ngcontent-%COMP%]:focus-within{border:1px solid var(--stroke-focus)!important}th[_ngcontent-%COMP%]{padding:2px 10px;border:2px solid var(--ligth-color)}.h3LoadLocation[_ngcontent-%COMP%]{color:var(--text-primary)}.groupCompanyBtn[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin:64px 10px 200px;height:90vh;padding-bottom:100px;overflow:scroll}.companySelectBtn[_ngcontent-%COMP%]{width:128px;height:80px;padding:10px 20px;border-radius:5px}.modalAddCompany[_ngcontent-%COMP%]{padding:2.5vw;margin-top:20px;display:flex;flex-direction:column;align-items:center;width:95vw;background:var(--gray-color);height:30vh;justify-content:center;align-content:center;flex-wrap:wrap}.modalAddCompany[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.modalAddCompany[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:90vw}.modalAddCompany[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:10px 2.5vw;width:85vw}.btnAddCompany[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:80px;width:50px;height:50px;border-radius:50%;font-size:40px;padding:1px;color:var(--text-primary);border:none;background-color:var(--button-primary-bg)}@media screen and (max-width:640px){.h3LoadLocation[_ngcontent-%COMP%]{position:absolute;top:40px;margin-left:40px;width:40px}.companySelectBtn[_ngcontent-%COMP%]{width:90vw;height:60px;margin-top:8px}.groupCompanyBtn[_ngcontent-%COMP%]{left:0;position:absolute;top:80px;display:flex;flex-wrap:wrap;justify-content:center}}"]})};export{X as LoadLocation};
