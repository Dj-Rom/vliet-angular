import{e as q}from"./chunk-3HWJ3ZKD.js";import{c as L,d as V}from"./chunk-2Y56YT2H.js";import{a as G,b as Z,c as w,d as $,e as B,f as H,g as C,i as J,j as X,k as W,r as K}from"./chunk-HPGZ2Y7G.js";import{g as z,n as j}from"./chunk-CI6ANZ2A.js";import{$a as u,Da as h,Ha as T,L as v,Ma as x,P as O,Q as S,V as E,W as D,Ya as p,Za as r,_ as N,_a as m,ca as A,fb as F,jb as _,lb as y,nb as U,pa as R,rb as c,tb as I,va as l,yb as M}from"./chunk-B4AEFEQM.js";var Y=(()=>{class i{constructor(){this.document=S(N),this.platformId=S(R),this.documentIsAccessible=j(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([[\]{}()|=;+?,.*^$\\])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),i.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.check(e)){e=encodeURIComponent(e);let o=i.getCookieRegExp(e).exec(this.document.cookie);return o?.[1]?i.safeDecodeURIComponent(o[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(o=>{let[g,s]=o.split("=");e[i.safeDecodeURIComponent(g.replace(/^ /,""))]=i.safeDecodeURIComponent(s)}),e}set(e,t,o,g,s,f,P,te){if(!this.documentIsAccessible)return;if(typeof o=="number"||o instanceof Date||g||s||f||P){let k={expires:o,path:g,domain:s,secure:f,sameSite:P||"Lax",partitioned:te};this.set(e,t,k);return}let d=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",a=o||{};if(a.expires)if(typeof a.expires=="number"){let k=new Date(new Date().getTime()+a.expires*1e3*60*60*24);d+="expires="+k.toUTCString()+";"}else d+="expires="+a.expires.toUTCString()+";";a.path&&(d+="path="+a.path+";"),a.domain&&(d+="domain="+a.domain+";"),a.secure===!1&&a.sameSite==="None"&&(a.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),a.secure&&(d+="secure;"),a.sameSite||(a.sameSite="Lax"),d+="sameSite="+a.sameSite+";",a.partitioned&&(d+="Partitioned;"),this.document.cookie=d}delete(e,t,o,g,s="Lax"){if(!this.documentIsAccessible)return;let f=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:f,path:t,domain:o,secure:g,sameSite:s})}deleteAll(e,t,o,g="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let f in s)s.hasOwnProperty(f)&&this.delete(f,e,t,o,g)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var b=class i{constructor(n){this.cookieService=n}setCookie(n,e,t=7){this.cookieService.set(n,e,t,"/")}getCookie(n){let e=this.cookieService.get(n);return e||null}deleteCookie(n){this.cookieService.delete(n,"/")}checkCookie(n){return this.cookieService.check(n)}clearAllCookies(){this.cookieService.deleteAll("/")}static \u0275fac=function(e){return new(e||i)(O(Y))};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};var ne=()=>["auth/forgot-password?"],re=()=>["/auth/sign-up"];function se(i,n){i&1&&(r(0,"small"),c(1,"Password is required"),m())}function ae(i,n){i&1&&(r(0,"p"),c(1,"/"),m())}function le(i,n){i&1&&(r(0,"small"),c(1,"Email is required"),m())}function ce(i,n){i&1&&(r(0,"small"),c(1,"Invalid email format "),m())}function me(i,n){if(i&1){let e=F();r(0,"div",19),u(1,"img",20),c(2),x(3,se,2,0,"small",21)(4,ae,2,0,"p",21)(5,le,2,0,"small",21)(6,ce,2,0,"small",21),r(7,"img",22),_("click",function(){E(e);let o=y();return D(o.form.reset())}),m()()}if(i&2){let e,t,o,g,s=y();U("color","red"),l(2),I("",s.errorMessage," "),l(),p("ngIf",(e=s.form.get("password"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",((t=s.form.get("password"))==null?null:t.invalid)&&((t=s.form.get("email"))==null?null:t.invalid)),l(),p("ngIf",(o=s.form.get("email"))==null||o.errors==null?null:o.errors.required),l(),p("ngIf",(g=s.form.get("email"))==null||g.errors==null?null:g.errors.email)}}function pe(i,n){i&1&&u(0,"img",23)}function ge(i,n){i&1&&u(0,"img",24)}var ee=class i{constructor(n,e,t,o){this.fb=n;this.router=e;this.ngZone=t;this.cookieService=o;this.isCookieUIDValid=this.fb.getCookie("van-vliet"),this.isCookieUIDValid&&this.router.navigate(["app"])}loading=!1;errorMessage="";isShow=!1;user;isCookieUIDValid="";form=new H({email:new C("",[w.required,w.email]),password:new C("",[w.required]),rm:new C(!1)});setShow(){this.isShow=!this.isShow}async onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.errorMessage="";let{email:n,password:e,rm:t}=this.form.value;try{this.user=await this.fb.signIn(n,e,!!t),t&&this.user?.uid&&this.cookieService.setCookie("van-vliet",JSON.stringify(this.user),7),this.ngZone.run(()=>{this.router.navigate(["app"])})}catch(o){this.errorMessage=o.message==="Firebase: Error (auth/invalid-credential)."?"Invalid email or password.":o.message}finally{this.loading=!1}}console=console;static \u0275fac=function(e){return new(e||i)(h(q),h(L),h(A),h(b))};static \u0275cmp=T({type:i,selectors:[["app-sign-in"]],decls:29,vars:11,consts:[[1,"app-login"],[1,"auth-logo-group"],[1,"font700size32"],[1,"mt8","font400size14"],[1,"form-login","mt68",3,"ngSubmit","formGroup"],["class","error-auth-message mt16 font400size16",3,"color",4,"ngIf"],["for","email",1,"mt14","font500size14"],["name","email","formControlName","email","type","email","placeholder","example@mail.com",1,"input","font400size16"],["for","password",1,"mt24","font500size14"],[1,"font500size14","forgot-password",3,"routerLink"],["name","password","formControlName","password","placeholder","Password",1,"input","font400size16",3,"type"],["type","button",1,"auth-show-password",3,"click"],["src","assets/svg/unshow.svg","width","25","height","25","alt","Hide password icon",4,"ngIf"],["src","assets/svg/show.svg","width","25","height","25","alt","Show password icon",4,"ngIf"],[1,"remember-me","font400size14"],["type","checkbox","name","rm","id","rm","formControlName","rm",1,"rm"],["type","submit",1,"button","mt56","btn-auth-submit","font600size16",3,"disabled"],[1,"font400size14","sing-up","mt24"],[1,"auth-link","font500size14",3,"routerLink"],[1,"error-auth-message","mt16","font400size16"],["src","assets/svg/error-message-logo.svg","alt","error=logo"],[4,"ngIf"],["src","assets/svg/close-X.svg","alt","X",3,"click"],["src","assets/svg/unshow.svg","width","25","height","25","alt","Hide password icon"],["src","assets/svg/show.svg","width","25","height","25","alt","Show password icon"]],template:function(e,t){if(e&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),c(3,"Welcome to Vliet"),m(),r(4,"span",3),c(5,"Please log in using the form below."),m()(),r(6,"form",4),_("ngSubmit",function(){return t.onSubmit()}),x(7,me,8,7,"div",5),r(8,"label",6),c(9," Email: "),m(),u(10,"input",7),r(11,"label",8),c(12," Password: "),r(13,"a",9),c(14,"Forgot password?"),m()(),u(15,"input",10),r(16,"button",11),_("click",function(){return t.setShow()}),x(17,pe,1,0,"img",12)(18,ge,1,0,"img",13),m(),r(19,"label",14),u(20,"input",15),c(21," Remember me "),m(),u(22,"br"),r(23,"button",16),c(24),m(),r(25,"div",17),c(26," Don\u2019t have account? "),r(27,"a",18),c(28,"Sign up"),m()()()()),e&2){let o;l(6),p("formGroup",t.form),l(),p("ngIf",t.errorMessage||((o=t.form.get("password"))==null?null:o.invalid)&&((o=t.form.get("password"))==null?null:o.touched)||((o=t.form.get("email"))==null?null:o.invalid)&&((o=t.form.get("email"))==null?null:o.touched)),l(6),p("routerLink",M(9,ne)),l(2),p("type",t.isShow?"text":"password"),l(2),p("ngIf",!t.isShow),l(),p("ngIf",t.isShow),l(5),p("disabled",t.loading),l(),I(" ",t.loading?"Loading...":"Log in"," "),l(3),p("routerLink",M(10,re))}},dependencies:[K,J,Z,G,$,B,W,X,z,V],styles:['.app-login[_ngcontent-%COMP%]{top:120px;width:100%;position:relative;display:flex;flex-direction:column;align-items:center;z-index:555555;background:#000}.app-login[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.form-login[_ngcontent-%COMP%]{width:361px;height:344px;angle:0 deg;opacity:1;top:270px;left:16px;gap:56px}.form-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:6px;background-color:var(--dark-color);border:1px solid var(--dark-color-b);color:var(--primary-color)}.form-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--tertiary-color)}.form-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active{outline:none;border:1px solid rgba(76,141,255,1)}label[_ngcontent-%COMP%]{width:362px;height:20px;angle:0 deg;opacity:1;gap:6px;color:var(--primary-color);display:flex;justify-content:space-between}.remember-me[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-end}.remember-me[_ngcontent-%COMP%]   .rm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;opacity:1;padding:2px;cursor:pointer;appearance:none;transition:background .3s ease}.remember-me[_ngcontent-%COMP%]   .rm[_ngcontent-%COMP%]:checked{background-color:var(--button-primary-color);color:var(--primary-color)}.remember-me[_ngcontent-%COMP%]   .rm[_ngcontent-%COMP%]:checked:after{content:"";width:5px;height:10px;border-right:2px solid white;border-bottom:2px solid white;transform:rotate(37deg);position:absolute;margin-left:3px}.auth-show-password[_ngcontent-%COMP%]{width:20px;height:20px;angle:0 deg;opacity:1;background:none;border:none;cursor:pointer;position:relative;transform:translate(322px,-32px)}.auth-show-password[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%}.sing-up[_ngcontent-%COMP%]{color:var(--primary-color);text-align:center}.sing-up[_ngcontent-%COMP%]   .auth-link[_ngcontent-%COMP%]{color:var(--focus-color);text-decoration-line:none}.btn-auth-submit[_ngcontent-%COMP%]{color:var(--primary-color);background:var(--button-primary-color);border:1px solid var(--button-primary-color)}.auth-logo-group[_ngcontent-%COMP%]{width:361px;height:68px;text-align:center;opacity:1;top:134px;left:17px;gap:8px}.auth-logo-group[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--focus-color)}.auth-logo-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:8px;color:var(--primary-color)}.forgot-password[_ngcontent-%COMP%]{color:var(--focus-color);width:120px;height:20px;angle:0 deg;opacity:1;text-decoration-line:none}.error-auth-message[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-content:center;align-items:center;width:362px;height:44px;border-radius:4px;border-width:1px;angle:0 deg;opacity:1;gap:8px;padding:10px 12px 10px 16px;background:var(--bg-system-error-color);color:var(--text-error-color);border:1px solid var(--text-error-color)}@media screen and (max-width:428px){.auth-logo-group[_ngcontent-%COMP%]{max-width:90vw}.form-login[_ngcontent-%COMP%]{max-width:90vw}.form-login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.form-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .form-login[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:90vw}.form-login[_ngcontent-%COMP%]   .auth-show-password[_ngcontent-%COMP%]{transform:translate(81vw,-31px)}}']})};export{ee as SignIn};
