import{c as d}from"./chunk-2Y56YT2H.js";import{a as h}from"./chunk-PS23FTD2.js";import{L as c,P as l,a as i,b as a,ga as u,j as o}from"./chunk-B4AEFEQM.js";var g=class n{constructor(t,e){this.alert=t;this.router=e;let s=localStorage.getItem("list");if(s)try{this._list$.next(JSON.parse(s))}catch{this._list$.next(i({},this.initialItemList))}}initialItemList={name:"",date:"",value:{"TAG-6":0,"TAG-5":0,CC:0,"CC-SH":0,EXT:0,NC:0,KK:0,"KK-SH":0,PALLETA:0,EUROPALLETA:0,520:0,"533/544":0,560:0,566:0,577:0,588:0,595:0,596:0,597:0,598:0,TRAAY:0,OTHER:0}};_list$=new o(i({},this.initialItemList));list$=this._list$.asObservable();listChanged$=new o(void 0);currentCompanyName=u("");getCurrentList(){return i({},this._list$.value)}setList(t){this._list$.next(i({},t)),this.saveList()}getSavedLists(){return JSON.parse(localStorage.getItem("lists")||"{}")}updateSavedLists(t){try{let e=this.getSavedLists(),s={[t.date]:t};Object.assign(e,s),localStorage.setItem("lists",JSON.stringify(e)),this.alert.show("success","Saved!"),this.router.navigate(["app/load-management/all"])}catch{this.alert.show("error","Error saving list")}}addToList(t,e){if(e<0)return;let s=a(i({},this._list$.value),{value:a(i({},this._list$.value.value),{[t]:e})});this._list$.next(s),this.saveList()}resetList(){this._list$.next(i({},this.initialItemList)),this.currentCompanyName.set(""),this.saveList()}saveList(){localStorage.setItem("list",JSON.stringify(this._list$.value))}onDone(){if(!this.currentCompanyName()?.trim()){this.alert.show("error","Please fill company name");return}let t=a(i({},this._list$.value),{name:this.currentCompanyName,date:this.formatDate(new Date)}),e={[t.date]:t},s=JSON.parse(localStorage.getItem("lists")||"{}");localStorage.setItem("lists",JSON.stringify(i(i({},s),e))),this.resetList(),this.listChanged$.next();let r=document.querySelector("#inputAddNewListCompanyName");return r&&(r.value=""),this.currentCompanyName.set(""),this.alert.show("success","Saved!"),t.date}filterList(t){let e=this._list$.value.value;if(!t)return i({},e);let s=t.toUpperCase();return Object.keys(e).filter(r=>r.includes(s)).reduce((r,m)=>a(i({},r),{[m]:e[m]}),{})}formatDate(t){return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)+" - "+t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}static \u0275fac=function(e){return new(e||n)(l(h),l(d))};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};export{g as a};
