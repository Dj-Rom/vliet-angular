import{a as $}from"./chunk-UJDGDID7.js";import{a as b}from"./chunk-WGBORDX4.js";import{b as A,c as _}from"./chunk-2Y56YT2H.js";import{e as j}from"./chunk-3HWJ3ZKD.js";import{q as R}from"./chunk-HPGZ2Y7G.js";import{g as D}from"./chunk-CI6ANZ2A.js";import{$a as h,Da as s,Ha as M,L as E,Ma as k,P as C,V as P,W as y,Ya as g,Za as c,_a as m,ab as l,bb as d,cb as u,fb as T,j as L,jb as v,kb as x,lb as f,ob as I,rb as r,sb as O,ua as w,va as a}from"./chunk-B4AEFEQM.js";var p=class n{constructor(t,e){this.listService=t;this.router=e}isActive=!1;isOpenMenuChanged$=new L(void 0);setIsOpenMoreMenu(){this.isActive=!0,this.isOpenMenuChanged$.next()}closeMoreMenu(){this.isActive=!1,this.isOpenMenuChanged$.next()}getIsActiveMoreMenu(){return this.isActive}formatListItemMessage(t){let e=this.listService.getSavedLists()[t],i=`Name: ${e.name}
Date: ${e.date}

Values:
`;for(let o of Object.keys(e.value))e.value[o]>0&&(i+=`${o}: ${e.value[o]}
`);return i.trim()}sendToWhatsApp(t){let e=this.formatListItemMessage(t),i=`https://wa.me/?text=${encodeURIComponent(e)}`;window.open(i,"_blank"),this.closeMoreMenu()}sendToNumber(t,e){let i=this.formatListItemMessage(t),o=`https://wa.me/${e}?text=${encodeURIComponent(i)}`;window.open(o,"_blank"),this.closeMoreMenu()}deleteListItem(t){let e=this.listService.getSavedLists();return delete e[t],localStorage.setItem("lists",JSON.stringify(e)),this.listService.listChanged$.next(),this.closeMoreMenu(),e}editListItem(t){this.router.navigate(["app/load-management/edit",t])}static \u0275fac=function(e){return new(e||n)(C(b),C(_))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};var S=class n{constructor(t){this.moreMenuService=t}date;title;onDelete(t){this.moreMenuService.deleteListItem(t)}onSend(t){this.moreMenuService.sendToWhatsApp(t)}edit(t){this.moreMenuService.editListItem(t)}static \u0275fac=function(e){return new(e||n)(s(p))};static \u0275cmp=M({type:n,selectors:[["app-more-menu"]],inputs:{date:"date",title:"title"},decls:17,vars:2,consts:[[1,"more-menu"],[1,"block","title"],["src","assets/svg/load-calc-icons/LocationAway.svg","alt","icon"],[1,"font400size16"],[1,"font400size12"],[1,"block","font400size16",3,"click"],["src","assets/svg/navi/Edit.svg","alt","icon-edit"],["src","assets/svg/navi/Sent.svg","alt","icon-sent"],["src","assets/svg/navi/Delete.svg","alt","icon-delete"]],template:function(e,i){e&1&&(l(0,"section",0)(1,"div",1),u(2,"img",2),l(3,"div")(4,"h5",3),r(5),d(),l(6,"span",4),r(7),d()()(),l(8,"button",5),x("click",function(){return i.edit(i.date)}),u(9,"img",6),r(10,"Edit"),d(),l(11,"button",5),x("click",function(){return i.onSend(i.date)}),u(12,"img",7),r(13,"Sent"),d(),l(14,"button",5),x("click",function(){return i.onDelete(i.date)}),u(15,"img",8),r(16,"Delete"),d()()),e&2&&(a(5),O(i.title),a(2),O(i.date))},styles:[".more-menu[_ngcontent-%COMP%]{border-radius:4px 4px 0 0;width:100%;height:252px;background:var( --bg-container);color:var(--text-primary);position:fixed;bottom:0;left:0;z-index:100001;display:flex;flex-direction:column;align-items:center;justify-content:center}.more-menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke-dark)}.more-menu[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{display:flex;align-items:center;width:361px;height:56px;min-height:56px;angle:0 deg;opacity:1;gap:8px;padding-top:6px;padding-bottom:6px}.more-menu[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;margin:8px}.more-menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary-color)}.more-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none;color:var(--text-primary)}"]})};function W(n,t){n&1&&(c(0,"span",7),r(1,"Packaging Receiving"),m())}function J(n,t){if(n&1){let e=T();c(0,"nav",8)(1,"ul",9)(2,"li",10),v("click",function(){P(e);let o=f();return y(o.changePage("all"))}),r(3,"All"),m(),c(4,"li",11),v("click",function(){P(e);let o=f();return y(o.changePage("today"))}),r(5,"Today"),m()()()}if(n&2){let e=f();a(2),I("active",e.selectedPage==="all"),a(2),I("active",e.selectedPage==="today")}}function q(n,t){if(n&1&&(c(0,"app-more-menu",12),r(1," >"),m()),n&2){let e=f();g("date",e.menuDate)("title",e.menuTitle)}}var F=class n{constructor(t,e,i,o){this.router=t;this.loadCalculatorService=e;this.firebase=i;this.moreMenuService=o;this.selectedPage=t.url.split("/").pop()||"all"}selectedPage="all";isOpenMoreMenu=!1;menuTitle="";menuDate="";ngOnInit(){this.updateMenuState(),this.moreMenuService.isOpenMenuChanged$.subscribe(()=>{this.updateMenuState()});let t=this.router.url.split("/").pop();this.selectedPage=t||"all",console.log(t),console.log(this.selectedPage==="load-management"),this.selectedPage==="load-management"&&(console.log(this.selectedPage),this.changePage("all"))}updateMenuState(){this.isOpenMoreMenu=this.moreMenuService.getIsActiveMoreMenu()}openMenu(t,e){this.menuTitle=t,this.menuDate=e,this.moreMenuService.setIsOpenMoreMenu()}doneSave(){this.loadCalculatorService.onDone()}changePage(t){this.selectedPage=t,this.router.navigate(["app/load-management",t])}onClickOutside(t){t.target.closest("img")||this.moreMenuService.closeMoreMenu()}static \u0275fac=function(e){return new(e||n)(s(_),s(b),s(j),s(p))};static \u0275cmp=M({type:n,selectors:[["app-load-calculator-page"]],hostBindings:function(e,i){e&1&&v("click",function(V){return i.onClickOutside(V)},w)},decls:8,vars:3,consts:[[1,"calculator-section","mt24"],["class","font400size16",4,"ngIf"],["class","navi font400size14 mt24",4,"ngIf"],[1,"mt24"],[3,"date","title",4,"ngIf"],[1,"btnAdd","active",3,"click"],["src","assets/svg/load-calc-icons/add.svg"],[1,"font400size16"],[1,"navi","font400size14","mt24"],[1,"navi-ul"],["id","all",3,"click"],["id","today",3,"click"],[3,"date","title"]],template:function(e,i){e&1&&(h(0,"app-alert"),c(1,"section",0),k(2,W,2,0,"span",1)(3,J,6,4,"nav",2),h(4,"router-outlet",3),k(5,q,2,2,"app-more-menu",4),c(6,"button",5),v("click",function(){return i.changePage("add")}),h(7,"img",6),m()()),e&2&&(a(2),g("ngIf",i.selectedPage!="add"),a(),g("ngIf",i.selectedPage!=="add"),a(2),g("ngIf",i.isOpenMoreMenu))},dependencies:[A,R,D,$,S],styles:[".calculator-section[_ngcontent-%COMP%]{position:absolute;top:0;color:#fff;width:100%;display:flex;flex-direction:column;align-items:center}.btnAdd[_ngcontent-%COMP%]{position:fixed;width:56px;height:56px;angle:0 deg;opacity:1;bottom:90px;right:30px;gap:8px;padding:12px;border-radius:50%!important;background:var(--button-primary-bg)!important}.navi[_ngcontent-%COMP%]{width:393px;height:40px;gap:10px;angle:0 deg;opacity:1;padding-right:16px;padding-left:16px}.active[_ngcontent-%COMP%]{font-weight:600;border:1px solid var(--button-primary-bg);border-radius:6px;background:var(--button-primary-bg)!important;color:var(--text-primary)!important}.navi-ul[_ngcontent-%COMP%]{width:361px;height:40px;angle:0 deg;opacity:1;border-radius:6px;padding:2px;background:var(--bg-container);list-style:none;display:flex}.navi-ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;color:var(--text-tertiary);background:var(--bg-container);width:178.5px;height:36px;gap:8px;angle:0 deg;opacity:1;padding:8px 16px;border-radius:4px}"]})};export{F as a};
