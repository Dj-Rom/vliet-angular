import{f as y}from"./chunk-CI6ANZ2A.js";import{Da as m,Ha as b,L as g,Ma as h,Ya as C,Za as n,_a as c,jb as p,lb as f,rb as r,sb as d,va as s}from"./chunk-B4AEFEQM.js";var u=class o{TIR;SOLO;TRAILER;constructor(){let e={capacityCC:43,Pallets:{CC:{ccValue:1},KK:{ccValue:1.909},FIN:{ccValue:1.65},EURO:{ccValue:1.303},ISO:{ccValue:1.953}},palletSize:{CC:"L135 W57",KK:"L132 W84",FIN:"L120 W100",EURO:"L120 W80",ISO:"L120 W120"},currentLoaded:{CC:0,KK:0,FIN:0,EURO:0,ISO:0},canLoad:{CC:0,KK:0,FIN:0,EURO:0,ISO:0}};this.TIR=structuredClone(e),this.SOLO=structuredClone(e),this.TRAILER=structuredClone(e),this.TIR.capacityCC=43,this.SOLO.capacityCC=26,this.TRAILER.capacityCC=23,this.loadFromStorage(),this.recalculateAll()}getTruck(e){return this[e]}totalLoad(e){let t=this.getTruck(e),a=Object.entries(t.currentLoaded).reduce((l,[L,v])=>l+t.Pallets[L].ccValue*v,0),i=a/t.capacityCC*100;return{usedCC:a,capacityCC:t.capacityCC,percentFull:Math.min(i,100)}}recalculateCanLoad(e){let t=this.getTruck(e),{usedCC:a}=this.totalLoad(e),i=Math.max(t.capacityCC-a,0);e==="TIR"&&i<0&&(i=0);for(let l in t.Pallets)t.canLoad[l]=Math.floor(i/t.Pallets[l].ccValue)}recalculateAll(){["TIR","SOLO","TRAILER"].forEach(e=>this.recalculateCanLoad(e)),this.save()}load(e,t,a){let i=this.getTruck(e);if(!i.Pallets[t])return;let l=Math.min(a,i.canLoad[t]);i.currentLoaded[t]+=l,l<a&&alert(`\u{1F6AB} \u041F\u043E\u043C\u0435\u0441\u0442\u0438\u043B\u043E\u0441\u044C \u0442\u043E\u043B\u044C\u043A\u043E ${l} \u0438\u0437 ${a}`),this.recalculateAll()}unload(e,t,a){let i=this.getTruck(e);i.currentLoaded[t]=Math.max(0,i.currentLoaded[t]-a),this.recalculateAll()}remainingAll(e){return this.getTruck(e).canLoad}resetAll(){["TIR","SOLO","TRAILER"].forEach(e=>{let t=this.getTruck(e);for(let a in t.currentLoaded)t.currentLoaded[a]=0;this.recalculateCanLoad(e)}),this.save()}save(){localStorage.setItem("truckDataCC",JSON.stringify({TIR:this.TIR,SOLO:this.SOLO,TRAILER:this.TRAILER}))}loadFromStorage(){let e=localStorage.getItem("truckDataCC");if(!e)return;let t=JSON.parse(e);for(let a of["TIR","SOLO","TRAILER"]){let i=this.getTruck(a);t[a]&&(i.currentLoaded=t[a].currentLoaded,i.canLoad=t[a].canLoad)}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"})};function k(o,e){if(o&1&&(n(0,"tr")(1,"td",11),r(2),c(),n(3,"td"),r(4),c(),n(5,"td"),r(6),c(),n(7,"td",12),r(8),c()()),o&2){let t=e.$implicit,a=f();s(2),d(t),s(2),d(a.truckData.palletSize[t]||"-"),s(2),d(a.truckData.currentLoaded[t]),s(2),d(a.truckData.canLoad[t])}}var x=class o{constructor(e){this.availableCapacityService=e;this.onSelect(this.selectedType)}selectedType="TIR";truckData;isActive(){let e=document.getElementById(this.selectedType.toLowerCase());document.querySelectorAll(".select-btn").forEach(t=>t.classList.remove("active")),e?.classList.add("active")}palletKeys(){return Object.keys(this.truckData.Pallets)}onSelect(e){this.selectedType=e,this.isActive(),this.truckData=this.availableCapacityService.getTruck(e),console.log(this.truckData)}static \u0275fac=function(t){return new(t||o)(m(u))};static \u0275cmp=b({type:o,selectors:[["app-available-capacity"]],decls:29,vars:1,consts:[[1,"available-capacity"],[1,"btnChooseGroup"],["id","tir",1,"select-btn","font500size16","active",3,"click"],["id","solo",1,"select-btn","font500size16",3,"click"],["id","trailer",1,"select-btn","font500size16",3,"click"],[1,"mt24"],[1,"font500size14"],[1,"font400size14"],[4,"ngFor","ngForOf"],[1,"mt24","btnGroupLoad"],[1,"btnLoad","font500size16"],[1,"font600size16"],[1,"canload"]],template:function(t,a){t&1&&(n(0,"section",0)(1,"h2"),r(2,"Available Capacity"),c(),n(3,"div",1)(4,"button",2),p("click",function(){return a.onSelect("TIR")}),r(5,"TIR"),c(),n(6,"button",3),p("click",function(){return a.onSelect("SOLO")}),r(7,"SOLO"),c(),n(8,"button",4),p("click",function(){return a.onSelect("TRAILER")}),r(9,"TRAILER"),c()(),n(10,"table",5)(11,"thead",6)(12,"th"),r(13,"Type"),c(),n(14,"th"),r(15,"Size"),c(),n(16,"th"),r(17,"Loaded"),c(),n(18,"th"),r(19,"Remaining"),c()(),n(20,"tbody",7),h(21,k,9,4,"tr",8),c()(),n(22,"div",9)(23,"button",10),r(24,"Reset All"),c(),n(25,"button",10),r(26,"Unload"),c(),n(27,"button",10),r(28,"Load"),c()()()),t&2&&(s(21),C("ngForOf",a.palletKeys()))},dependencies:[y],styles:[".available-capacity[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;flex-direction:column;align-items:center}.btnChooseGroup[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:361px;height:44px;gap:8px;angle:0 deg;opacity:1;border-bottom-width:1px}.select-btn[_ngcontent-%COMP%]{width:115px;height:44px;padding:10px 18px;gap:8px;angle:0 deg;opacity:1;border-radius:4px;color:#fff;background:#1e2329;border:1px solid rgba(47,54,62,1)}.active[_ngcontent-%COMP%]{font-weight:600;background:#4c8dff}table[_ngcontent-%COMP%]{width:361px;height:320px;angle:0 deg;opacity:1;border-radius:8px;background:#161a1f;border:1px solid rgba(42,47,54,1)}thead[_ngcontent-%COMP%]{background:#1d2228}tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(42,47,54,1)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center;width:104px;height:40px;padding:10px 8px;gap:8px;angle:0 deg;opacity:1;color:#fff}.canload[_ngcontent-%COMP%]{font-family:Inter;font-weight:600;font-style:Semi Bold;font-size:16px;leading-trim:NONE;line-height:24px;letter-spacing:0%;text-align:center;color:#6ce9a6}.btnGroupLoad[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;width:361px;height:208px;gap:8px;angle:0 deg;opacity:1;border-bottom-width:1px}.btnLoad[_ngcontent-%COMP%]{width:361px;height:64px;padding:10px 18px;gap:8px;angle:0 deg;opacity:1;border-radius:4px;background:#1e2329;border:1px solid rgba(47,54,62,1);color:#fff}@media screen and (max-width:368px){.btnChooseGroup[_ngcontent-%COMP%], table[_ngcontent-%COMP%], .btnGroupLoad[_ngcontent-%COMP%]{width:95vw}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{height:2vh}.btnLoad[_ngcontent-%COMP%]{width:95vw}}"]})};export{x as AvailableCapacity};
