import{a as f}from"./chunk-KQXXKGDI.js";import{a as W}from"./chunk-OVB45VQA.js";import{c as v}from"./chunk-2Y56YT2H.js";import{b as U,d as J,h as K,q as y}from"./chunk-HPGZ2Y7G.js";import{f as z,g as B,i as $}from"./chunk-CI6ANZ2A.js";import{$a as g,Ab as R,Da as c,Ha as w,L as _,Ma as N,P as k,V as M,W as b,Ya as m,Za as o,_a as r,a as I,f as P,fb as T,ga as j,j as A,jb as s,lb as x,rb as p,sb as u,ub as E,va as d,vb as F,wb as V,zb as D}from"./chunk-B4AEFEQM.js";var h=class a{isNameModalOpen=j(!1);openNameModal(){this.isNameModalOpen.set(!0)}closeNameModal(){this.isNameModalOpen.set(!1)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=_({token:a,factory:a.\u0275fac,providedIn:"root"})};var S=class a{constructor(t,e,i,n){this.listService=t;this.router=e;this.modalService=i;this.addNewList=n}name;title;placeholder;create(){this.listService.setCurrentCompanyName(this.name)?this.close():alert("error")}close(){this.addNewList.setIsOpenedModalForName()}cancel(){this.modalService.closeNameModal()}static \u0275fac=function(e){return new(e||a)(c(f),c(v),c(h),c(C))};static \u0275cmp=w({type:a,selectors:[["app-add-name-modal"]],inputs:{title:"title",placeholder:"placeholder"},decls:9,vars:4,consts:[[1,"modal-window",2,"display","flex","justify-content","center","flex-direction","column"],[1,"font400size16"],["type","text",1,"mt16","font400size16",3,"ngModelChange","ngModel","ngModel"],[1,"groupBtn","mt16"],[1,"font500size16",3,"click"],["]","",1,"font600size16","createBtn",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"section",0)(1,"h2",1),p(2),r(),o(3,"input",2),V("ngModelChange",function(l){return F(i.name,l)||(i.name=l),l}),r(),o(4,"div",3)(5,"button",4),s("click",function(){return i.cancel()}),p(6,"Cancel"),r(),o(7,"button",5),s("click",function(){return i.create()}),p(8,"Create"),r()()()),e&2&&(d(2),u(i.title),d(),E("ngModel",i.name),m("ngModel",i.placeholder),d(4),m("disabled",!i.name))},dependencies:[y,U,J,K],styles:[".modal-window[_ngcontent-%COMP%]{width:304px;height:176px;left:50%;transform:translate(-50%);gap:16px;angle:0 deg;opacity:1;padding:16px 24px;border-radius:8px;border-width:1px;background:var(--bg-container);position:fixed;text-align:center;top:204px;z-index:99}.modal-window[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:256px;height:44px;gap:8px;angle:0 deg;opacity:1;padding:10px 12px 10px 16px;border-radius:4px;border-width:1px;background:var(--bg-input);border:1px solid var(--focus-color);color:var(--text-primary)}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:active, input[_ngcontent-%COMP%]:focus-within, input[_ngcontent-%COMP%]:focus-visible{color:var(--text-primary)!important;outline:none!important;border:1px solid var(--focus-color)!important}.groupBtn[_ngcontent-%COMP%]{width:256px;height:44px;gap:9px;angle:0 deg;opacity:1;display:flex}.groupBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:123.5px;height:44px;gap:8px;angle:0 deg;opacity:1;padding:10px 18px;border-radius:4px;background:transparent;color:var(--text-secondary-color);border:none}.groupBtn[_ngcontent-%COMP%]   .createBtn[_ngcontent-%COMP%]{background:var(--button-primary-color);color:var(--primary-color)}button[_ngcontent-%COMP%]:disabled{background:var(--button-primary-disabled)!important}"]})};var O=class a{constructor(t,e){this.listService=t;this.router=e}isActive=!1;isOpenMenuChanged$=new A(void 0);setIsOpenMoreMenu(){this.isActive=!0,this.isOpenMenuChanged$.next()}closeMoreMenu(){this.isActive=!1,this.isOpenMenuChanged$.next()}getIsActiveMoreMenu(){return this.isActive}formatListItemMessage(t){let e=this.listService.getSavedLists()[t],i=`Name: ${e.name}
Date: ${e.date}

Values:
`;for(let n of Object.keys(e.value))e.value[n]>0&&(i+=`${n}: ${e.value[n]}
`);return i.trim()}sendToWhatsApp(t){let e=this.formatListItemMessage(t),i=`https://wa.me/?text=${encodeURIComponent(e)}`;window.open(i,"_blank"),this.closeMoreMenu()}sendToNumber(t,e){let i=this.formatListItemMessage(t),n=`https://wa.me/${e}?text=${encodeURIComponent(i)}`;window.open(n,"_blank"),this.closeMoreMenu()}deleteListItem(t){let e=this.listService.getSavedLists();return delete e[t],localStorage.setItem("lists",JSON.stringify(e)),this.listService.listChanged$.next(),this.closeMoreMenu(),e}editListItem(t){this.router.navigate(["app/load-management/edit",t])}static \u0275fac=function(e){return new(e||a)(k(f),k(v))};static \u0275prov=_({token:a,factory:a.\u0275fac,providedIn:"root"})};function ee(a,t){if(a&1&&g(0,"app-add-name-modal",15),a&2){let e=x();m("title","Enter the name")("placeholder",e.companyName)}}function te(a,t){if(a&1){let e=T();o(0,"div")(1,"div",16)(2,"div",17),g(3,"img",18),o(4,"span",19),p(5),r()(),o(6,"div",20)(7,"button",21),s("click",function(){let n=M(e).$implicit,l=x();return b(l.decrement(n.key))}),g(8,"img",22),r(),o(9,"span",23),p(10),r(),o(11,"button",21),s("click",function(){let n=M(e).$implicit,l=x();return b(l.increment(n.key))}),g(12,"img",24),r(),o(13,"button",25),s("click",function(){M(e);let n=x();return b(n.calculator())}),g(14,"img",26),r()()()()}if(a&2){let e=t.$implicit;d(5),u(e.key),d(5),u(e.value)}}var C=class a{constructor(t,e,i,n,l){this.listService=t;this.appService=e;this.moreMenuService=i;this.router=n;this.modalService=l;this.modalService.openNameModal(),this.isOpen=this.modalService.isNameModalOpen,this.companyName=this.listService.getCurrentCompanyName(),this.appService.setAuth(!1),this.sub.add(this.listService.list$.subscribe(Q=>{this.currentList=I({},Q),this.applyFilter(this.filterValue)}))}currentList={name:"",date:"",value:{}};filteredList={};filterValue="";companyName="";sub=new P;isOpen;setIsOpenedModalForName(){this.modalService.closeNameModal(),this.companyName=this.listService.getCurrentCompanyName()}calculator(){}onFilterChange(t){let e=t.target.value||"";this.filterValue=e,this.applyFilter(e),window.scrollTo(0,0)}applyFilter(t){this.filteredList=this.listService.filterList(t)}increment(t){let e=(this.currentList.value[t]??0)+1;this.listService.addToList(t,e)}decrement(t){let e=Math.max(0,(this.currentList.value[t]??0)-1);this.listService.addToList(t,e)}resetList(){this.listService.resetList()}save(){this.listService.onDone(),this.appService.setAuth(!0)}ngOnDestroy(){this.sub.unsubscribe()}openMenu(){this.moreMenuService.setIsOpenMoreMenu()}back(){this.router.navigateByUrl("/")}async download(){let t=this.listService.onDone();t&&this.moreMenuService.sendToWhatsApp(t)}static \u0275fac=function(e){return new(e||a)(c(f),c(W),c(O),c(v),c(h))};static \u0275cmp=w({type:a,selectors:[["app-add-new-list"]],decls:20,vars:6,consts:[[3,"title","placeholder",4,"ngIf"],[1,"header-add-new-list","font400size16"],["src","assets/svg/load-calc-icons/arrow-back.svg",1,"more",3,"click"],[1,"font400size16"],["src","assets/svg/load-calc-icons/download-svg.svg",3,"click"],["src","assets/svg/load-calc-icons/More.svg",1,"more",3,"click"],[1,"filterInput","mt12"],["src","assets/svg/load-calc-icons/filter.svg","alt","filter"],["type","text","placeholder","Search",1,"font400size16",3,"input","value"],["src","assets/svg/load-calc-icons/closeItem.svg","alt","close"],[1,"section-add-new-lists"],[4,"ngFor","ngForOf"],[1,"btnSaveContainer"],[1,"button","saveBtn","font600size16",3,"click"],[3,"click"],[3,"title","placeholder"],[1,"section-add-new-list","mt6"],[1,"section-add-new-list-text"],["src","assets/svg/load-calc-icons/Info.svg","alt","icon"],[1,"font600size16"],[1,"section-add-new-list-buttons"],[1,"btn",3,"click"],["src","assets/svg/load-calc-icons/Vector.svg"],[1,"inp","font400size16"],["src","assets/svg/load-calc-icons/add.svg"],[1,"btn-calculate","btn",3,"click"],["src","assets/svg/load-calc-icons/Calculate.svg","alt","icon-calculate"]],template:function(e,i){e&1&&(N(0,ee,1,2,"app-add-name-modal",0),o(1,"header")(2,"div",1)(3,"img",2),s("click",function(){return i.back()}),r(),o(4,"span",3),p(5),r(),o(6,"img",4),s("click",function(){return i.download()}),r(),o(7,"img",5),s("click",function(){return i.openMenu()}),r()(),o(8,"div",6),g(9,"img",7),o(10,"input",8),s("input",function(l){return i.onFilterChange(l)}),r(),g(11,"img",9),r()(),o(12,"section",10),N(13,te,15,2,"div",11),D(14,"keyvalue"),r(),o(15,"div",12)(16,"button",13),s("click",function(){return i.save()}),p(17,"Save"),r()(),o(18,"button",14),s("click",function(){return i.resetList()}),p(19,"Reset List"),r()),e&2&&(m("ngIf",i.isOpen()),d(5),u(i.companyName),d(5),m("value",i.filterValue),d(3),m("ngForOf",R(14,4,i.filteredList)))},dependencies:[z,y,B,S,$],styles:[".section-add-new-list[_ngcontent-%COMP%]{width:361px;height:112px;angle:0 deg;opacity:1;gap:8px;border-radius:6px;border-width:1px;padding:8px;background:var(--bg-container)}header[_ngcontent-%COMP%]{position:sticky;top:0;background:#000}.section-add-new-lists[_ngcontent-%COMP%]{height:2899px;overflow:scroll;margin-top:24px}input[_ngcontent-%COMP%]{border:none!important;outline:none!important;box-shadow:none!important;background:var(--bg-input);width:361px;height:44px;angle:0 deg;opacity:1;gap:8px;border-radius:4px;border-width:1px;padding:10px 12px 10px 16px}input[_ngcontent-%COMP%]:focus{border:1px solid var(--stroke-focus)!important}.btn-calculate[_ngcontent-%COMP%]{background:none;border:none}.item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none}.header-add-new-list[_ngcontent-%COMP%]{margin-top:-24px;width:361px;height:44px;angle:0 deg;opacity:1;left:16px;gap:8px;display:flex;justify-content:space-between}.header-add-new-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:44px;height:44px;background:none;border:none;color:var(--focus-color)}.header-add-new-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;left:50px;width:361px;margin-right:44px;color:var(--text-primary);justify-content:center}.filterInput[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:361px;height:44px;angle:0 deg;opacity:1;gap:6px;background:var(--bg-input);margin-bottom:24px;border-radius:4px}.filterInput[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.filterInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--text-primary);border:none;width:290px;height:24px;angle:0 deg;opacity:1;background:var(--bg-input)}.filterInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none!important}.filterInput[_ngcontent-%COMP%]:focus-within{border:1px solid var(--stroke-focus)!important}.btn[_ngcontent-%COMP%]{width:44px;height:44px;angle:0 deg;opacity:1;gap:8px;border-radius:4px;border-width:1px;background:var(--stroke-light);color:var(--text-primary)}.addBtn[_ngcontent-%COMP%]{font-size:24px}.inp[_ngcontent-%COMP%]{width:189px;height:44px;angle:0 deg;opacity:1;gap:8px;text-align:center;border-radius:4px;border-width:1px;padding:10px 16px;background:var(--stroke-light);color:var(--text-primary)}.section-add-new-list-text[_ngcontent-%COMP%]{align-items:center;display:flex;width:345px;height:44px;angle:0 deg;opacity:1;gap:8px}.section-add-new-list-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.section-add-new-list-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;text-align:center;width:261px;height:24px;angle:0 deg;opacity:1}.section-add-new-list-buttons[_ngcontent-%COMP%]{width:345px;height:44px;angle:0deg;opacity:1;gap:8px;display:flex;justify-content:space-between}.more[_ngcontent-%COMP%]{width:24px}.btnSaveContainer[_ngcontent-%COMP%]{position:fixed;z-index:199999;left:0;bottom:0;min-width:393px;width:100%;text-align:center;margin:0 auto;height:80px;angle:0 deg;opacity:1;background:#000;padding:8px 16px 28px;gap:10px}.saveBtn[_ngcontent-%COMP%]{border:var(--focus-color);width:361px;height:44px;angle:0 deg;opacity:1;padding:10px 18px;gap:8px;border-radius:4px;background:var(--focus-color);color:var(--text-primary)}"]})};export{h as a,O as b,C as c};
